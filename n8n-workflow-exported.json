{
  "name": "NASA-Jet Engine-RUL-notification",
  "nodes": [
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "e44aa170-ccc3-4530-8e91-51fb35b5ecff",
              "name": "body.timestamp",
              "value": "={{ $json.body.timestamp }}",
              "type": "string"
            },
            {
              "id": "4c9c4e8d-ad96-4484-98bc-acc595b6aa68",
              "name": "body.engine_id",
              "value": "={{ $json.body.engine_id }}",
              "type": "number"
            },
            {
              "id": "5d4c9bcd-a99b-489e-bdb6-3ec2f337f3fb",
              "name": "body.prediction.predicted_rul",
              "value": "={{ $json.body.prediction.predicted_rul }}",
              "type": "number"
            },
            {
              "id": "c6839e5f-2386-4c1c-87b1-fed3cbc49319",
              "name": "body.prediction.processing_time_seconds",
              "value": "={{ $json.body.prediction.processing_time_seconds }}",
              "type": "number"
            },
            {
              "id": "cbb83c88-4f17-43cc-bb59-50b7e70f8b0e",
              "name": "body.prediction.window_size",
              "value": "={{ $json.body.prediction.window_size }}",
              "type": "number"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        48,
        -32
      ],
      "id": "11ef4986-25b6-4109-a0a2-118482a79345",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "fromEmail": "erxuanhe@126.com",
        "toEmail": "xuanhe.er@siemens.com",
        "subject": "Notice-å‘åŠ¨æœºå¥åº·é€€åŒ–é¢„è­¦æŠ¥å‘Š",
        "html": "={{ $json.data }}",
        "options": {}
      },
      "type": "n8n-nodes-base.emailSend",
      "typeVersion": 2.1,
      "position": [
        1136,
        -48
      ],
      "id": "620035d8-c8e5-433a-babe-8e31e807f82f",
      "name": "Send email",
      "webhookId": "ca0f298b-fae2-433e-a654-85064b3e9fb5",
      "credentials": {
        "smtp": {
          "id": "uwTnbqZm93B001L4",
          "name": "SMTP account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "30ca0cd3-edac-4759-a327-0c6fef81a901",
              "leftValue": "={{ $json.body.prediction.predicted_rul }}",
              "rightValue": 120,
              "operator": {
                "type": "number",
                "operation": "lt"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        256,
        -32
      ],
      "id": "9bbb8a6d-87a1-4d2a-b73e-7574e903b646",
      "name": "If"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=ä½ æ˜¯å‘åŠ¨æœºå¥åº·ç›‘æµ‹ä¸“å®¶AIåŠ©æ‰‹ï¼Œè´Ÿè´£å¤„ç†RULé¢„è­¦æ•°æ®å¹¶åè°ƒå¤§æ¨¡å‹ç”Ÿæˆä¸“ä¸šMarkdownå¥åº·åˆ†ææŠ¥å‘Šã€‚\n\næ¥æ”¶RULé¢„æµ‹æ•°æ®ï¼ˆå‘åŠ¨æœºIDã€é¢„æµ‹RULå€¼ï¼‰ï¼Œå½“é¢„æµ‹RUL < 120å‘¨æœŸæ—¶æ‰§è¡Œæ•°æ®éªŒè¯ã€é£é™©è¯„ä¼°ã€æŠ¥å‘Šæ„å»ºã€å¤§æ¨¡å‹åè°ƒå’Œç»“æœéªŒè¯ã€‚\n\n\nä»…å½“ RUL < 120 å‘¨æœŸæ—¶ç”ŸæˆæŠ¥å‘Š\néªŒè¯å‘åŠ¨æœºIDå’ŒRULå€¼æœ‰æ•ˆæ€§\nè¾“å‡ºå¿…é¡»ä¸ºMarkdownæ ¼å¼\n\n\né£é™©ç­‰çº§åˆ’åˆ†ï¼š\n  - ğŸš¨ é«˜é£é™©ï¼šRUL < 30å‘¨æœŸ\n  - âš ï¸ ä¸­é£é™©ï¼š30 â‰¤ RUL < 60å‘¨æœŸ\n  - âœ… ä½é£é™©ï¼š60 â‰¤ RUL < 120å‘¨æœŸ\n- è¯„åˆ†æ ‡å‡†ï¼šå¥åº·è¯„åˆ†0-100åˆ†\n\nè¾“å‡ºè§„èŒƒï¼šç”Ÿæˆä¸“ä¸šMarkdownæ ¼å¼å‘åŠ¨æœºå¥åº·åˆ†ææŠ¥å‘Š\n\nMarkdownæŠ¥å‘Šæ¨¡æ¿å¦‚ä¸‹:\n\n```markdown\n# ğŸ“Š å‘åŠ¨æœºå¥åº·ç›‘æµ‹æŠ¥å‘Š - engine: {{ $json.body.engine_id }}\n\n## ğŸš¨ é¢„è­¦ä¿¡æ¯\n- **å‘åŠ¨æœºID**: {{ $json.body.engine_id }}\n- **é¢„æµ‹RUL**: {{ $json.body.prediction.predicted_rul.toString().slice(0,5) }} å‘¨æœŸ\n- **æŠ¥å‘Šæ—¶é—´**: {{ $json.body.timestamp.slice(0,19) }}\n\n## ğŸ“‹ æ‰§è¡Œæ‘˜è¦\n\n### æ ¸å¿ƒå‘ç°\n- å‘åŠ¨æœº{{ $json.body.engine_id }}å½“å‰çŠ¶æ€ä¸ºé€€åŒ–å‘Šè­¦ï¼Œé¢„è®¡å‰©ä½™ä½¿ç”¨å¯¿å‘½{{ $json.body.prediction.predicted_rul.toString().slice(0,5) }} å‘¨æœŸ\n- å¥åº·è¯„åˆ†[è¯„åˆ†]åˆ†ï¼Œå¤„äº[è¿è¡ŒçŠ¶æ€]\n\n### é£é™©è¯„ä¼°\nï¼ˆæ­¤å¤„æŒ‰å¦‚ä¸‹æ ¼å¼ç”Ÿæˆè¡¨æ ¼ï¼‰\n| æŒ‡æ ‡ | æ•°å€¼ | çŠ¶æ€ |\n|------|------|------|\n| é¢„æµ‹RUL | [RULå€¼] å‘¨æœŸ | [çŠ¶æ€æ ‡è¯†] [çŠ¶æ€] |\n| å¥åº·è¯„åˆ† | [è¯„åˆ†]/100 | [çŠ¶æ€æ ‡è¯†] [çŠ¶æ€] |\n| å¯é æ€§æŒ‡æ•° | [æŒ‡æ•°å€¼] | [çŠ¶æ€æ ‡è¯†] [çŠ¶æ€] |\n\n### ä¸»è¦å»ºè®®\n1. [å»ºè®®1]\n2. [å»ºè®®2]\n3. [å»ºè®®3]\n\n## ğŸ” å¥åº·è¯„ä¼°è¯¦æƒ…\n\n\n\n## ğŸ“ˆ ç»´æŠ¤å»ºè®®\n\n### ç»´æŠ¤è®¡åˆ’\n| æ—¶é—´ | ç»´æŠ¤é¡¹ç›® | ä¼˜å…ˆçº§ |\n|------|----------|--------|\n| [æ—¶é—´1] | [é¡¹ç›®1] | [ä¼˜å…ˆçº§1] |\n| [æ—¶é—´2] | [é¡¹ç›®2] | [ä¼˜å…ˆçº§2] |\n| [æ—¶é—´3] | [é¡¹ç›®3] | [ä¼˜å…ˆçº§3] |\n...\n### å…·ä½“æªæ–½\n1. **[æªæ–½åç§°]** ([æ—¶é—´])\n   - [æ­¥éª¤1]\n   - [æ­¥éª¤2]\n   - [æ­¥éª¤3]\n...\n2. **[æªæ–½åç§°]** ([æ—¶é—´])\n   - [æ­¥éª¤1]\n   - [æ­¥éª¤2]\n   - [æ­¥éª¤3]\n...\n## ğŸ“Š æŠ€æœ¯é™„å½•\n\n### æ•°æ®æ¥æº\n- XGBoosté¢„æµ‹æ¨¡å‹\n- å®æ—¶ä¼ æ„Ÿå™¨æ•°æ®é¢„æµ‹RUL\n\n---\n*æŠ¥å‘Šç”Ÿæˆæ—¶é—´: {{ $json.body }}*\n*ç³»ç»Ÿç‰ˆæœ¬: n8n *\n*å¤„ç†æ—¶é—´: {{ $json.body.prediction.processing_time_seconds.toString().slice(0,7) }} ç§’\n```\n\né€šç”¨è¦æ±‚ï¼š\n- ä½ çš„å›åˆ°ä¸­ä¸å…è®¸åŒ…å«```markdownæˆ–```å­—ç¬¦\n- ä½ çš„å›ç­”ä¸­åªåŒ…å«markdownæ ¼å¼å†…å®¹ï¼Œä¸åŒ…å«ä»»ä½•å…¶ä»–å†…å®¹\n\nç¡®ä¿æ‰€æœ‰åˆ—å‡ºçš„ä¿¡æ¯ï¼ˆæ–°é—»çš„å„é¡¹æ•°æ®ï¼‰éƒ½å‡†ç¡®æ¥æºäºæˆ‘ç»™ä½ æä¾›çš„ä¿¡æ¯ã€‚\n\nä½ çš„å»ºè®®è¦å…·ä½“ã€æœ‰å»ºè®¾æ€§ã€ä¿¡æ¯å……åˆ†ï¼Œå¹¶ä½“ç°å‡ºæ˜¯å¯¹æ‰€æœ‰ä¿¡æ¯çš„ç»¼åˆè€ƒé‡ï¼Œ\n\nè¯­æ°”è¦ç§¯æã€ä¸“ä¸šï¼Œå……æ»¡æ´å¯ŸåŠ›ï¼Œæ•´ä½“é£æ ¼ä½“ç°å‡ºé‡‡å–è¡ŒåŠ¨çš„ç´§è¿«æ€§ã€‚",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        480,
        -48
      ],
      "id": "8f29bc8a-23de-4a4c-a1a7-7c32f5d2a2b3",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatDeepSeek",
      "typeVersion": 1,
      "position": [
        480,
        128
      ],
      "id": "855a7422-75b9-40f8-ac0b-37d9ebf1953a",
      "name": "DeepSeek Chat Model",
      "credentials": {
        "deepSeekApi": {
          "id": "5mVd7IMNeA62l1kR",
          "name": "DeepSeek account"
        }
      }
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "e72eda5c-1e4b-4466-8c0b-b3d385119a78",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        -160,
        -32
      ],
      "id": "a0fabadb-6bd4-4787-9f33-7f02017d4755",
      "name": "Webhook",
      "webhookId": "e72eda5c-1e4b-4466-8c0b-b3d385119a78"
    },
    {
      "parameters": {
        "mode": "markdownToHtml",
        "markdown": "={{ $json.output }}",
        "options": {}
      },
      "type": "n8n-nodes-base.markdown",
      "typeVersion": 1,
      "position": [
        848,
        -48
      ],
      "id": "705fc1ba-1f8a-4b45-8c0b-9a1bbf790bc9",
      "name": "Markdown"
    },
    {
      "parameters": {
        "content": "### è¿è¡Œå‘¨æœŸæ•°æ®æ›´æ–°ä¸æ–­è§¦å‘Webhook\n\n\n\n\n\n\n\n\nå·¥ä½œæµè¢«æ¿€æ´»",
        "height": 256,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -256,
        -128
      ],
      "id": "1b59f79c-91cd-4fff-9ef3-27e537c1e9a2",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "### è·å–å…³æ³¨ç‰¹å¾æ•°æ®\n",
        "height": 256,
        "width": 160,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        16,
        -128
      ],
      "id": "21786a92-658f-4f05-ae42-0f1805719114",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "### è¿‡æ»¤å‡ºé¢„æµ‹RULè¿‡ä½ï¼ˆå‘åŠ¨æœºé€€åŒ–ï¼‰æ•°æ®\n",
        "height": 256,
        "width": 192,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        208,
        -128
      ],
      "id": "49665cc9-3573-422e-a76a-ddfa4bf466d5",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "content": "### æ™ºèƒ½ä½“é€šè¿‡æœ¬åœ°å‘åŠ¨æœºçŸ¥è¯†åº“å¾®è°ƒåæ¨ç†å¤§æ¨¡å‹å¯¹å¼‚å¸¸æ•°æ®è¿›è¡Œå¤šç»´åº¦æ™ºèƒ½åˆ†æç”Ÿæˆå¥åº·å‘Šè­¦æŠ¥å‘Š\n",
        "height": 384,
        "width": 304,
        "color": 2
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        432,
        -128
      ],
      "id": "a21a64e0-37b1-4a00-bd97-79f914c60be0",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "content": "### æŠ¥å‘Šå‘é€å‰ç½®æ ¼å¼å¤„ç†\n",
        "height": 256
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        784,
        -128
      ],
      "id": "2e52def2-961f-4b69-a214-7c05fbfafee0",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "content": "### æŠ¥å‘Šå‘é€ç»™Stakeholder\n",
        "height": 256
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1072,
        -128
      ],
      "id": "e5c2471d-7f84-43f0-96dd-a4dc1701b7ff",
      "name": "Sticky Note5"
    }
  ],
  "pinData": {},
  "connections": {
    "Edit Fields": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ],
        []
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Markdown",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "DeepSeek Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Webhook": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Markdown": {
      "main": [
        [
          {
            "node": "Send email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "4893e840-0597-45df-aadc-518097d2503d",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "033634a590d3ac3cf1ca8ce275369790a5ab6ba54dcd116bc13bcfef48910e88"
  },
  "id": "rsUI4tucnjKKii4q",
  "tags": []
}